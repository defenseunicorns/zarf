apiVersion: v1
kind: Namespace
metadata:
  name: pepr-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
rules:
  - apiGroups:
      - '*'
    resources:
      - '*'
    verbs:
      - create
      - delete
      - get
      - list
      - patch
      - update
      - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
subjects:
  - kind: ServiceAccount
    name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
    namespace: pepr-system
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
  namespace: pepr-system
---
apiVersion: v1
kind: Secret
metadata:
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b-api-token
  namespace: pepr-system
type: Opaque
data:
  value: >-
    NTFhYjlhMjdiY2FkODI4NGE1Njg3MjVmMjhjMzI2OTY3Zjc3ZmJhOWNhMTk5NDczODZjNTQyZTBhZGFjM2M3Zg==
---
apiVersion: v1
kind: Secret
metadata:
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b-tls
  namespace: pepr-system
type: kubernetes.io/tls
data:
  tls.crt: >-
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tDQpNSUlDd3pDQ0FhdWdBd0lCQWdJQkFUQU5CZ2txaGtpRzl3MEJBUXNGQURBQU1CNFhEVEl6TURreE9ESXlNVE15DQpNbG9YRFRJME1Ea3hPREl5TVRNeU1sb3dBRENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DDQpnZ0VCQU1qMXFqRlo5RDVMMTdEd01xaUpXSjZSenQvbHhBQVVkaTYwUXBqQ0JtUXkxdmlxVnVSVHhVeVZyODFjDQpIK284djlwa2N1VWV6YjBYVlB3cHFOZjBkT0JVSUptOUw5M2J1Y0ladmV6RjNnSnBzRTRTcHM1bHJOcngwK3IwDQpDTWZpL1FiaXVqd1FKNDRwa1V6K2hrLzRicmVZUUFHbEdUY09IaU5FTFZSSG9oU01qb3pSVXhFMXBhMUJncFQzDQpVSGJOQ3FkNHo2VFY0OGxvcVdGOUkzN0lHSzJmSGVVbmdCREFqZ0o3eGprMHdONy96YmxiLzRjKytVamJWeWlyDQp3NjdyR2VsQTZTZytzeHVkQUpCWUhDZEtrVGY0UDZHdkhSVDcrd0JkMDVHOC8yVEZQcTIyUUhLelpiVlpaUFhrDQplZTdVYjBnbnE2V3VRUGYxQXY4VmVTdlZ3R1VDQXdFQUFhTklNRVl3UkFZRFZSMFJCRDB3TzRJNWNHVndjaTFqDQpZalUyT1RObFppMWtNVE5qTFRWbVpURXRZalZoWkMxak9EY3dabVE1TVRGaU0ySXVjR1Z3Y2kxemVYTjBaVzB1DQpjM1pqTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFCRHdUbmEyVTg2YXhqbzVvdDhtREJteXVyUlpISEc2bWgvDQpPaWdFM0IwOFhlQk8rdEw1TE1LbTBndU9hUmwxLzhBRUJFTUJ3TE05OHdKVW1CTWI0MHB5Yyt1MHpuaHFUM0U2DQpRRElkNGVsVDhOaG00bk96M3dPS1l5QUxuRklhY2gzc2FYWktwMFRLdC9rcWpwNXA5d3NoYlVQeS95R0JHTE1sDQpMSzg3WS9LSUxDSVpidHgreFc4TERIYkd5V0tMUDNIUlphbHNHRTZkWGM4ZVduOTkrdTI1dmFiY2ZWcWt0UkxZDQpFT0ZpOEdaVm1EVEFVQ0tQTmVyL0t3SEtlZWFnOVA0VytManJkQklKMDdzcVNUakpTWjNsb0c3c1BNRHM0V2x0DQpLQmZhdkJNMmlaV21TNUllZGNva202eXJFY0NxbUptQXltNVNDQWJuckZnaDFuL3lqOUFhDQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tDQo=
  tls.key: >-
    LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQ0KTUlJRXBBSUJBQUtDQVFFQXlQV3FNVm4wUGt2WHNQQXlxSWxZbnBITzMrWEVBQlIyTHJSQ21NSUdaRExXK0twVw0KNUZQRlRKV3Z6VndmNmp5LzJtUnk1UjdOdlJkVS9DbW8xL1IwNEZRZ21iMHYzZHU1d2htOTdNWGVBbW13VGhLbQ0Kem1XczJ2SFQ2dlFJeCtMOUJ1SzZQQkFuamltUlRQNkdUL2h1dDVoQUFhVVpOdzRlSTBRdFZFZWlGSXlPak5GVA0KRVRXbHJVR0NsUGRRZHMwS3AzalBwTlhqeVdpcFlYMGpmc2dZclo4ZDVTZUFFTUNPQW52R09UVEEzdi9OdVZ2Lw0KaHo3NVNOdFhLS3ZEcnVzWjZVRHBLRDZ6RzUwQWtGZ2NKMHFSTi9nL29hOGRGUHY3QUYzVGtiei9aTVUrcmJaQQ0KY3JObHRWbGs5ZVI1N3RSdlNDZXJwYTVBOS9VQy94VjVLOVhBWlFJREFRQUJBb0lCQUFSOEN2aS85NlhlUG1sNQ0KNnI5OUZTZXd2RXVkem9KcjhuazNWNWNlR1ZOcUdRY0NraDdWU2IxY1I4aU82ajFwYnFTYWdqL2ZzSnFzSng3Yg0KZFNPZ2xtMGRJMzhhekRNb3dKdjJ4QmpCRDZQQkpRaVEvUHoxSXViZDU2dENGK0lTRERCM3BjMUtWUCtrcU5QdA0KaUNUSHQvekwzbjNLNStXbElJSUw5dkQvQ2p4b0huTHFpOEhMUmcyNzZvUjEzZ20vbGJHNkszNXk3cGRhQWw2Zw0KeERMRnFnQWVmTkU0M25QbG5oR2U0WHdsRXhOY1lvRGJLQ3duZHB5b3BNcU54YTJQOVV3L2d2R0NlcklTVElkQQ0KeTFEVWNqRmVndk96M3M3cmRxOEJ4VkxkcGc1L2dxWm84djIzRUo1SHR6dVl0RHc1cEo2L21HazZwOWxBbDczaQ0KRHpQUENnOENnWUVBMm81UTZNYllWcjVWSk43TEREUCtNNy94VGlKZXNJbjBCaUd6WXM4V0hJdTFQRWtvdkhrNg0Kd2hHcmhsR0I5SnF0YVVpNXNobGptQXV6N0p6a2d1b1p0WDBYU3J4ZGdQVzA0dnYrZEdVcko1dVg1NDE3Y255Zw0KZ1hJanM1bTVic2s4aFhYMFl1OC9RajJrNGdxeFY2K09ObHpNdXlxdHloZ3ZsVklDZm9hcHRvc0NnWUVBNjJPVw0KOXlQdjd1dkhJQjVCaU51QzRZY0VYRFJvMXZOaHlDaS9CSmlkRzJwaUpaT2w1alFzY1gxTFNVUHZmOGpXREZudw0KR3B5K29GSUczZk8rSERhL05sbWtNK2Q1TDBCQWFEbmlXZ1NCYnJnc0lBY2F6dlFJT1ZIdXpITVM1UW84cERvRA0KOWhRSGQxY1d0VWJDRmV0R2JLblovaE8zQlRNd2Q5VXhtTHRjTXM4Q2dZRUFrbCtHS0tBais5UjFTY0E4MU90dA0KY0ZNNDFVK0hnMHloTmdvVURqVUxaZ3JiVW9qYzAzMk5zTFFNNEdSdVdOZlBGQmcwNWViRElPMlZqdjUwdklqMA0KdHV3VVVXVmVhaVFsQlhBbnR1U2F4bWdha0dYZEs0djBJejNDVTJLOUlrbDhVeFh3bXVJSXgrQnBNVXBnQTQzNw0KL01TaUNTaElSSFYyU05jbi9IMUw1SWtDZ1lFQXJ2T1lVeHZzeXdHSFFNSDhKNEl2cHZ3NUsyYnd2VUtyM0o4Yw0KU29nN3pSS20zQkwvYlRnK0NDUDkvdmgxVzk2ajZRNDN2Uy9mSnoyUVNRdE9zNTJsUlBvZloweVY3NTZyd0V1MQ0KaHY1dVRTS3ArU3dPcXQ4SjljQ0Y0b05zK2J0QUV6ZmpsZFNSTUF3VW5xdDJ1ZC9pdWdVTU55SGtHQU5SOU44Sw0KTytDVnlGVUNnWUFxN1Irb0Z1U3lyU1Z5d0F5ZlVjQTdZKytMQlA4Skw2eU1oa3cwWkNqQ040ZzdJeVMrR2pUdg0KV2pjalpmYXViMFNUR3R5TFpDUmY1Z1JEL3FHS2xhOFZTT3RLZkw4c0s1dVRnejRXNjV2aGNIMHArbFNYTjcwUQ0Ka3dtOTFEL1ZQTlNuRUNNdG9DbnVGZDhSaVBucjNob1NvRGpPSDNqNFQ2cUJMODd2UUYvUWlnPT0NCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tDQo=
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
  namespace: pepr-system
  labels:
    app: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
spec:
  replicas: 2
  selector:
    matchLabels:
      app: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
  template:
    metadata:
      labels:
        app: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
    spec:
      priorityClassName: system-node-critical
      serviceAccountName: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
      containers:
        - name: server
          image: ghcr.io/defenseunicorns/pepr/controller:v0.13.3
          imagePullPolicy: IfNotPresent
          command:
            - node
            - /app/node_modules/pepr/dist/controller.js
            - 388110abdec7d8bb2601d75a4ad0e6be677e2cd1ab4e71369deea9e11e4cc32b
          readinessProbe:
            httpGet:
              path: /healthz
              port: 3000
              scheme: HTTPS
          livenessProbe:
            httpGet:
              path: /healthz
              port: 3000
              scheme: HTTPS
          ports:
            - containerPort: 3000
          env:
            - name: PEPR_PRETTY_LOG
              value: 'false'
          resources:
            requests:
              memory: 64Mi
              cpu: 100m
            limits:
              memory: 256Mi
              cpu: 500m
          volumeMounts:
            - name: tls-certs
              mountPath: /etc/certs
              readOnly: true
            - name: api-token
              mountPath: /app/api-token
              readOnly: true
            - name: module
              mountPath: /app/load
              readOnly: true
      volumes:
        - name: tls-certs
          secret:
            secretName: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b-tls
        - name: api-token
          secret:
            secretName: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b-api-token
        - name: module
          secret:
            secretName: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b-module
---
apiVersion: v1
kind: Service
metadata:
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
  namespace: pepr-system
spec:
  selector:
    app: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
  ports:
    - port: 443
      targetPort: 3000
---
apiVersion: v1
kind: Secret
metadata:
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b-module
  namespace: pepr-system
type: Opaque
data:
  module-388110abdec7d8bb2601d75a4ad0e6be677e2cd1ab4e71369deea9e11e4cc32b.js.gz: >-
    H4sIAAAAAAAAE41VbW/bNhD+3l/BcEMrDRRrw8iWKlC8IduKFnkpkhYBZngIJZ5s1jKpkVQ8T9V/31FyMmdNsH2wTN4L7+6558g7YUmVXeafofBcQqk0fLCmBuu3x3eoK7JIMx9nJxX+Uy3WQFl7J6oGUs8Ko0u1aKzIK0gPRl3cu8jMwh+NshDRGmpLB6nK2uCdUvhTrOsKkg3kS2NWlN2BdcrolI74iI8pk+AKq2rfyyhbwXZjrHTpbDiO0dWRw29tKlVsE9ALzDnsUZmsjWyqsHNQNFb5LZ2zwcKlrTYS459k4yMMNKIdCy7pc2k1jZIpLfLD799MoEzkeFIkhyWMk/xQyKQ4+mFUyjfjcT7JKTP6F2uNTalaaGMxvqg2Yuve9bshgqtFgUnM5qwSOVRh1XVsqBRzo6uJTBz4pqZpWJOiapwHRBMq8ED66iTckZcvyb66sCD21UmymrhE2AV5laAgbxY/OrAIcTp6hRVLqEFL0IUKgPT1098R9Qmf0K7rGyWebJ/LNGyI4KeiFrmqENnoOeAe9e8n4lRQk50ZKR4OIN4QtzQbEn47b0ew1yuyUX5JfhO2JIjaSiwAYagrs12D9o5Ttg8o/Qvt6LyLWXuzBJ0uu8wdLyPBBb8GhMfH/J077WGSl/ZTLcMiQqG+uD8lGs6I+Q3GPQvtwdqHwMkQOFG6NGhw3nh0j4Tb6oLo7KTF5hCfaX4lNgyYZXV2MD72dtvaTHiTRzhUwov+EwflqCuEL5ao3tN0wQGy99eXF7wW1kFk48EuMnHrlxYBCvD3JItufxWqAhng642JXwJxfan/HJmSb1vT3cZdiR4hSUNMSWDKh3pAnpp1bXTAczqdzWNVRoY7LK5xWZbRn3srpRc0aAQ/MwseIIhuP2Kw4t43BOGhGR1RjuDEWRRW21230P02ZsAfzG92TZ7ymZn2fnNcUg/OP9AHJSbvKSvfggYrAo8wJeCLh208JNTT+/mMlsIRUWHj5RbXkoh7kiEX8XZAFhAEhyjPyYXxOyHmTIQ2CKnlt/ExDiq0T1Tw5Uv0hDRruyfrnQ0pzbP2ca33d88jIRu6kNKrRuvQAfY1Huk+Gji3gT9iI5Qnq2g8eiaHHeL/xvu+6/S6KQoACZLuuLeOnyr9vw8a+ImXYN8lGEjbc5e4CqDGogI914GeXY29PRhN96ib5d6IqB8G5y0aq3IbQRyn+zZfqfHxKRtdBEAQBB23OA6N1f3c4Iu2VjhVPjvBK/ajWoNpfOSZ/m4MkxhHLVrhixFSw9suOEj+Aa++8/4xiRSbuXl8/OL162+IM40t4FzUoYhPV2dZf/H+n0eCf3Z8LeoXfwMGU5NncQcAAA==
---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
webhooks:
  - name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b.pepr.dev
    admissionReviewVersions:
      - v1
      - v1beta1
    clientConfig:
      caBundle: >-
        LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tDQpNSUlDdERDQ0FaeWdBd0lCQWdJQkFUQU5CZ2txaGtpRzl3MEJBUXNGQURBY01Sb3dHQVlEVlFRREV4RlFaWEJ5DQpJRVZ3YUdWdFpYSmhiQ0JEUVRBZUZ3MHlNekE1TVRneU1qRXpNakZhRncweU5EQTVNVGd5TWpFek1qRmFNQUF3DQpnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDWVhwdDMxN09RUDg2OTVxRXhBNFhMDQo4UzBaWFAzL3ZXSWZxVnZsamUvN2RINEFiSHdMRitFY2ZMU1EvNDhZVkJzMkxRajJuVmF2YlVwSE12WHB0NzVNDQorUmMyaTJGdVNxbHpqYWlRYjk0RkVoRlZYNjB2YTNrWjlnYmFhb1piRmhKYUp1NFpRSEVnTVRyeE5jenNYUEQzDQpxZS84RStIV1J4czlDNnhKTDVsQ1c4V0U2dERFMURjV05nMmpscjZRNHdwWTZHajlZT0RMMFVsOWtzYk1YMHRWDQpPVFNNU0dTbkdjR0Z6c2ZwVDFHelZFdHJXa0FPRjF1dXlHdUQrK2VaeWZzV2V5b2pxWFlYbHp1QkdlTzhTdWdIDQpiY040djJ4T2xVNEt5eEM0ay8rTFRtSXkvK2tTQ2gxeGdFaUx1MVdLUFlaSzB6YWc4VWN2bDMrZ21EUE04VE83DQpBZ01CQUFHakhUQWJNQXdHQTFVZEV3UUZNQU1CQWY4d0N3WURWUjBQQkFRREFnTDBNQTBHQ1NxR1NJYjNEUUVCDQpDd1VBQTRJQkFRQndCd2w1S2J1ak5MNFlqMkdqdzcycVFqell5SG4yZXRFT2JHVEMvWWpLVlpZVzk1emFXaEwxDQpHWEt2SnJla2ZhR29kRkJONEZMQnBMNk1WSVlTcmZHaXhuaVZTTnkvY096dlBYYjZqNjFFcWg3VGJFcmsxeWVEDQpOWmc0cEdFQmFocW9HZFJrayttbEdxOXNURFdQU0YydzBFODR0OG56b0g3VXlhQ09IQkY1Sm1BZHdNZlg0dks1DQp6dmgybm5iQ2RRbFQreXVsZUJTbDFYQXNPNGNYbHBCcTBmK01wUUZmYUdFNThMWlI5SzZ4SHFaaUpZdXprczN5DQoxdG9EUUo1dFJOQ1ltQWZqNUFjbXdSdzdGZG5mM3kyQmE3TTAwbkpYcVlnbUx4S2J0V3JJbnRIWDEyTW9OcUt6DQpMVEVVVTVqb2JzVlI4TEtVZmNNOXg2RHRGTW1wN3NoMQ0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ0K
      service:
        name: pepr-cb5693ef-d13c-5fe1-b5ad-c870fd911b3b
        namespace: pepr-system
        path: >-
          /mutate/51ab9a27bcad8284a568725f28c326967f77fba9ca19947386c542e0adac3c7f
    failurePolicy: Ignore
    matchPolicy: Equivalent
    timeoutSeconds: 10
    namespaceSelector:
      matchExpressions:
        - key: pepr.dev
          operator: NotIn
          values:
            - ignore
        - key: kubernetes.io/metadata.name
          operator: NotIn
          values:
            - kube-system
            - pepr-system
    objectSelector:
      matchExpressions:
        - key: pepr.dev
          operator: NotIn
          values:
            - ignore
        - key: kubernetes.io/metadata.name
          operator: NotIn
          values:
            - kube-system
            - pepr-system
    rules:
      - apiGroups:
          - ''
        apiVersions:
          - v1
        operations:
          - CREATE
          - UPDATE
        resources:
          - secrets
    sideEffects: None
